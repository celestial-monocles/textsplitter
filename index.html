<script>
  function splitText() {
    const text = document.getElementById('inputText').value.trim();
    let numSplits = parseInt(document.getElementById('splitNumber').value);

    // Set default value if numSplits is not provided or invalid
    if (isNaN(numSplits) || numSplits < 1) {
      numSplits = 2;
    }

    const outputContainer = document.getElementById('outputContainer');

    // Clear previous outputs
    outputContainer.innerHTML = '';

    if (!text) {
      alert('Please provide valid input text.');
      return;
    }

    const lines = text.split('\n');
    const chunkSize = Math.ceil(lines.length / numSplits);
    let start = 0;

    for (let i = 0; i < numSplits; i++) {
      const chunk = lines.slice(start, start + chunkSize).join('\n');
      start += chunkSize;

      // Create a container for the text box and button
      const container = document.createElement('div');
      container.className = 'output-container';

      // Create a text box for each split
      const textBox = document.createElement('textarea');
      textBox.className = 'output-box';
      textBox.rows = 10;
      textBox.readOnly = true;
      textBox.value = chunk;

      // Create a copy button
      const copyButton = document.createElement('button');
      copyButton.className = 'copy-button';
      copyButton.textContent = 'Copy Text';
      copyButton.onclick = () => copyToClipboard(copyButton, chunk);

      // Append the text box and button to the container
      container.appendChild(textBox);
      container.appendChild(copyButton);

      // Append the container to the output area
      outputContainer.appendChild(container);
    }
  }

  function copyToClipboard(button, text) {
    navigator.clipboard.writeText(text).then(() => {
      button.textContent = 'Copied!';
      setTimeout(() => {
        button.textContent = 'Copy Text';
      }, 2000);
    }).catch(err => {
      alert('Failed to copy text: ' + err);
    });
  }
</script>
